# 国际化 (i18n) 使用文档

本项目使用 `next-intl` 实现国际化功能。

## 配置

### 支持的语言
- 中文 (zh)
- 英文 (en)

默认语言：中文 (zh)

## 使用方法

### 1. 在服务端组件中使用

```tsx
import { useTranslations } from "next-intl";

export default function Page() {
  const t = useTranslations("common");

  return (
    <div>
      <h1>{t("welcome")}</h1>
      <p>{t("loading")}</p>
    </div>
  );
}
```

### 2. 在客户端组件中使用

```tsx
"use client";

import { useTranslations } from "next-intl";

export default function ClientComponent() {
  const t = useTranslations("common");

  return <button>{t("submit")}</button>;
}
```

### 3. 使用语言切换器

```tsx
import { LanguageSwitcher } from "@/components/LanguageSwitcher";

export default function Header() {
  return (
    <header>
      <LanguageSwitcher />
    </header>
  );
}
```

### 4. 使用国际化路由

```tsx
import { Link } from "@/i18n/routing";

export default function Navigation() {
  return (
    <nav>
      <Link href="/">{t("nav.home")}</Link>
      <Link href="/about">{t("nav.about")}</Link>
    </nav>
  );
}
```

### 5. 编程式导航

```tsx
"use client";

import { useRouter } from "@/i18n/routing";

export default function Component() {
  const router = useRouter();

  const handleClick = () => {
    router.push("/about");
  };

  return <button onClick={handleClick}>Go to About</button>;
}
```

## 添加新的翻译

### 1. 在 messages/zh.json 中添加中文翻译

```json
{
  "common": {
    "newKey": "新的翻译"
  }
}
```

### 2. 在 messages/en.json 中添加英文翻译

```json
{
  "common": {
    "newKey": "New Translation"
  }
}
```

## 翻译文件结构

```
messages/
├── zh.json  # 中文翻译
└── en.json  # 英文翻译
```

### 推荐的命名空间组织

```json
{
  "common": {
    // 通用文本
  },
  "nav": {
    // 导航相关
  },
  "form": {
    // 表单相关
  },
  "error": {
    // 错误信息
  },
  "validation": {
    // 验证信息
  }
}
```

## 动态翻译

### 带参数的翻译

在翻译文件中：
```json
{
  "greeting": "你好，{name}！"
}
```

在代码中使用：
```tsx
const t = useTranslations();
t("greeting", { name: "张三" }); // 输出：你好，张三！
```

### 复数形式

```json
{
  "items": "{count, plural, =0 {没有项目} =1 {1个项目} other {# 个项目}}"
}
```

```tsx
t("items", { count: 0 }); // 没有项目
t("items", { count: 1 }); // 1个项目
t("items", { count: 5 }); // 5个项目
```

## 获取当前语言

```tsx
import { useLocale } from "next-intl";

export default function Component() {
  const locale = useLocale(); // 'zh' 或 'en'

  return <div>当前语言: {locale}</div>;
}
```

## 添加新语言

### 1. 更新 routing.ts

```typescript
export const routing = defineRouting({
  locales: ["zh", "en", "ja"], // 添加日语
  defaultLocale: "zh",
});
```

### 2. 创建翻译文件

创建 `messages/ja.json`

### 3. 更新语言切换器

```tsx
{loc === "zh" && "中文"}
{loc === "en" && "English"}
{loc === "ja" && "日本語"}
```

## 最佳实践

1. **使用命名空间组织翻译**：将相关的翻译放在同一个命名空间下
2. **保持键名一致**：所有语言文件应该有相同的键结构
3. **避免硬编码文本**：所有用户可见的文本都应该通过翻译系统
4. **使用描述性的键名**：如 `form.emailPlaceholder` 而不是 `text1`
5. **定期检查缺失的翻译**：确保所有语言文件都是完整的

## URL 结构

- 默认语言（中文）：`/` 或 `/about`
- 其他语言：`/en` 或 `/en/about`

配置 `localePrefix: "as-needed"` 使得默认语言不显示语言前缀。
